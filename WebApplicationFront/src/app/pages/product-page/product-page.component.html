<div class="product-page">
  <div class="product" *ngIf="product">
    <!-- Верхний блок -->
    <div class="product-top">
      <!-- Галерея -->
      <div class="gallery">
        <div class="thumbnails">
          <div
            class="thumbnail"
            *ngFor="let img of product.images"
            (click)="selectImage(img)"
          >
            <img [src]="img" [alt]="product.name" />
          </div>
        </div>
        <div class="main-image">
          <img
            [src]="selectedImage || product.images[0]"
            [alt]="product.name"
          />
        </div>
      </div>

      <!-- Информация -->
      <div class="product-info">
        <h1 class="title">{{ product.name }}</h1>
        <div class="price">{{ product.price }} руб.</div>

        <div class="actions">
          <button class="add-to-cart" (click)="addToCart()">В корзину</button>
          <button class="add-to-compare" (click)="addToComparison()">
            К сравнению
          </button>
        </div>
      </div>
    </div>

    <!-- Нижний блок -->
    <div class="product-bottom">
      <div class="description">
        <h3>Описание</h3>
        <p>{{ product.description }}</p>
      </div>

      <div class="properties">
        <h3>Характеристики</h3>
        <div
          class="property"
          *ngFor="let prop of product.productPropertyValues"
        >
          <span class="name">{{ prop.name }}:</span>
          <span class="value">{{ prop.value }}</span>
        </div>
      </div>
    </div>

    <!-- Похожие товары -->
    <div class="similar-products" *ngIf="simmularProducts.length > 0">
      <h2>Похожие товары</h2>
      <div class="products-scroll">
        <app-product-card
          *ngFor="let product of simmularProducts"
          [product]="product"
        >
        </app-product-card>
      </div>
    </div>

    <!-- Комментарии -->
    <div class="comments-section">
      <h2>Отзывы</h2>

      <div class="comment-form">
        <h3>Оставить отзыв</h3>
        <textarea
          [(ngModel)]="newComment"
          placeholder="Ваш отзыв..."
          maxlength="1000"
          rows="3"
        ></textarea>
        <button (click)="addComment()" [disabled]="!newComment">
          Отправить
        </button>
      </div>

      <div class="comments-list">
        <div class="comment" *ngFor="let comment of comments">
          <div class="comment-header">
            <span class="user-name">{{ comment.userName }}</span>
            <span class="comment-date">{{
              comment.creationDate | date : "dd.MM.yyyy"
            }}</span>
          </div>
          <p class="comment-text">{{ comment.text }}</p>
        </div>
      </div>
    </div>
  </div>
</div>
